{% extends "base.html" %}
{% block title %} Company List{% endblock title %}
   
 
 
    {% block content %}
    
    <div class="container content-wrapper">
    <div class="tables-data">
          
    <div class="row">
        <div class="col" style="display:flex; justify-content:start;  ">
          <h2>Company List</h2> </div>
         <div class="col">
      <a href=" "   data-bs-toggle="modal" data-bs-target="#add_company"    class="add-button"   data-toggle="tooltip" data-placement="top" title="Add"><i class="fas fa-plus p-icon"></i> Add</a> </div>
      </div>

    <div class="table-responsive">
    <table  class="tables table-hover">
        <thead>
            <tr>
                <th class="text-center">Company Name</th>
                <th class="text-center">Email</th>
                <th class="text-center">Mobile Number</th>
                <th class="text-center"> GSTIN Number</th>
                <th class="text-center">Country</th>
               
                <th class="text-center">Balance</th>
                <th class="text-center">Action</th>
            </tr>
        </thead>
        <tbody>
          {% for company in companies %}
            <tr>
                <td class="text-center">{{company.company_name}}</td>
                <td class="text-center">{{company.email}}</td>
                <td class="text-center">{{company.mobile}}</td>
                <td class="text-center">{{company.gstin}}</td>
                <td class="text-center">{{company.country}}</td>
                <td class="text-center">{{company.balance}}</td>
                <div class="btns">
                    <td class="text-center">
                         
                        <a href="" onclick="setCompanyId({{company.id}})"  data-bs-toggle="modal" data-bs-target="#update_company"  class="edit-buttonn btn bg-success edit-company "   data-toggle="tooltip" data-placement="top" title="Edit"><i class="fa fa-edit"></i></a>
        
                      <a href="" onclick="setCompanyId({{company.id}})" data-bs-toggle="modal" data-bs-target="#delete_company"  class="delete-buttonn btn  bg-danger"  data-toggle="tooltip" data-placement="top" title="Delete" ><i class="fa fa-trash"></i> </td>
                    </div>
            </tr>
            {% endfor %}
            
            <!-- Add more rows as needed -->
        </tbody>
    </table>
</div>
</div>


  <!-- Modal -->
  <div class="modal fade" id="add_company" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title" id="exampleModalLabel">Add Company</h2>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
          
            <div class="modal-body">
              <h5  class="msg text-center" id="msg"> </h5>
                <form action="#" method="POST" id="addCompanyForm">
                    <div class="row">
                    <div class="add-form col-4">
                        <label for="company_name">Company Name:</label>
                        <input type="text" id="company_name1" name="company_name" class="txtOnly" placeholder="Enter Company Name">
                        <span  class="messages" id="company_nameMessage1"></span> 
                    </div>
                    <div class="add-form col-4">
                        <label for="email">Email:</label>
                        <input type="text" id="email1" name="email" placeholder="Enter Email" >
                        <span  class="messages" id="emailMessage1"></span> 
                    </div>
                   
                    <div class="add-form col-4">
                        <label for="mobile_number">Mobile Number:</label>
                        <input type="number" id="mobile1" oninput="truncateInputValue(this)" name="mobile" placeholder="Enter Mobile Number">
                        <span  class="messages" id="mobileMessage1"></span> 
                           
                    </div>
                    <div class="add-form col-4">
                        <label for="number"> GSTIN Number:</label>
                        <input type="text" id="gstin1" name="gstin" placeholder="Enter GSTIN Number"  >
                        <span  class="messages" id="gstinMessage1"></span> 
                    </div>
                   

                    <div class="add-form col-4">
                        <label for="number">Balance:</label>
                        <input type="number" id="balance1" name="balance" placeholder="Enter Balance" >
                        <span  class="messages" id="balanceMessage1"></span> 
                    </div>
                    <div class="add-form col-4">
                        <label for="country">Country:</label>
                        <select id="country1" name="country">
                            <option >Select Country</option>
                            {% for country in countries %}
                            <option value="{{country.id}}" >{{country.country_name}}</option>
                            {% endfor %}
                        </select>
                        <span  class="messages" id="countryMessage1"></span> 
                    </div>
                     
                    
                  
                    
                    <div class="add-form col">
                        <label for="address">Address:</label>
                        
                        <textarea   id="address1" name="address" placeholder="Enter Address"  ></textarea>
                        <span  class="messages" id="addressMessage1"></span> 
                    </div>
                    <div class="modal-footer" style="justify-content:center;">
                        <button type="button" class="btn  close-button" data-bs-dismiss="modal">Close</button>
                        <div class="add-form">
                          <button type="submit" class="btn">Add</button>
                      </div>
                      </div>
                </div>
                </form>
        </div>

        
      </div>
    </div>
  </div>



  {% comment %} update page Modal {% endcomment %}


  <div class="modal fade" id="update_company" tabindex="-1" aria-labelledby="exampleModalLabe2" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title" id="exampleModalLabe2">Update Company</h2>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
       
            <div class="modal-body">
              <h5  class="msg text-center" id="msg1"> </h5>
                <form action="#" method="POST" id="addUserForm">
                    <div class="row">
                    <div class="add-form col-4">
                        <label for="company_name">Company Name:</label>
                        <input type="text" id="company_name" name="company_name" class="txtOnly" placeholder="Enter Company Name">
                        <span  class="messages" id="company_nameMessage"></span> 
                    </div>
                    <div class="add-form col-4">
                        <label for="email">Email:</label>
                        <input type="text" id="email" name="email" placeholder="Enter Email">
                        <span  class="messages" id="emailMessage"></span> 
                    </div>
                   
                    <div class="add-form col-4">
                        <label for="mobile_number">Mobile Number:</label>
                        <input type="number" id="mobile" oninput="truncateInputValue(this)" name="mobile" placeholder="Enter Mobile Number">
                        <span  class="messages" id="mobileMessage"></span> 
                           
                    </div>
                    <div class="add-form col-4">
                        <label for="number"> GSTIN Number:</label>
                        <input type="text" id="gstin" name="gstin" placeholder="Enter GSTIN Number">
                        <span  class="messages" id="gstinMessage"></span> 
                    </div>

                    <div class="add-form col-4">
                        <label for="balance">Balance:</label>
                        <input type="number" id="balance" name="balance" placeholder="Enter Balance"  readonly="readonly"  >
                        <span  class="messages" id="balanceMessage"></span> 
                    </div>
                   
                    <div class="add-form col-4">
                        <label for="country">Country:</label>
                        <select id="country" name="country">
                            <option >Select Country</option>
                            {% for country in countries  %}
                            <option value="{{country.id}}" {% if country.id == single_company.country %}selected{% endif %}>{{country.country_name}}</option>
                            {% endfor %}
                             
                        </select>
                        <span  class="messages" id="countryMessage"></span> 
                    </div>
                     
                     
                   
                  
                    <div class="add-form col">
                        <label for="address">Address:</label>
                        <textarea   id="address" name="address"  placeholder="Enter Address"></textarea>
                        <span  class="messages" id="addressMessage"></span> 
                    </div>
                    <div class="modal-footer" style="justify-content:center;">
                        <button type="button" class="btn  close-button" data-bs-dismiss="modal">Close</button>
                        <div class="add-form">
                          <button type="submit" onclick="return update_company();" id="update-company-button" class="btn">Update</button>
                      </div>
                      </div>
                </div>
                </form>   

        </div>
        
      </div>
    </div>
  </div>



</div>



<div class="modal fade" id="delete_company" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        
            <div class="modal-body">
               
            </p>Are you sure you want to delete this Company</p>
            <div class="modal-footer">
                <button type="button" class="btn  close-button" data-bs-dismiss="modal">Close</button>
                <div class="add-form">
                  <button type="submit" class="btn yes-button">Yes</button>
              </div>
              </div>
        </div>
  
       
      </div>
    </div>
  </div>




  
  <div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
          <div style="display:flex; justify-content:end; margin-right:10px; margin-top:10px;">
                
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" style="padding:0px 0px 10px 0px;">
                <p class="text-green text-center" style="font-size:20px;font-wieght:500px;"
                 id="successMessage"></p>
            </div>

            
        </div>
    </div>
</div>

    {% endblock %}
